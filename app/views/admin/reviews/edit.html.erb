<div class="container">
  <div class="row">
    <div class="col">
      <%= form_with model: @review, url: admin_portfolio_review_path do |f| %>
        <div class="form-group" id="star">
          <%= f.label :evaluation, "評価" %>
          <%= f.hidden_field :evaluation, id: :review_star, class: "form-control" %>
          <%= render 'layouts/errors', object: @review, parameter: :evaluation %>
        </div>
        <div id="post_raty"></div>
        <script>
          $(document).on('turbolinks:load', function() {
            $('#post_raty').empty();
            let raty_elem = document.querySelector('#post_raty');
            raty_elem.innerHTML = ""
            let option = {
                starOn: "<%= asset_path('star-on.png') %>",
                starOff: "<%= asset_path('star-off.png') %>",
                starHalf: "<%= asset_path('star-half.png') %>",
                score: "<%= @review.evaluation %>",
                scoreName: 'review[evaluation]',
            };
            raty(raty_elem,option);
          });
        </script>

        <div class="form-group">
          <%= f.label :comment, "コメント" %>
          <%= f.text_area :comment, class: "form-control" %>
          <%= render 'layouts/errors', object: @review, parameter: :comment %>
        </div>
        <div class="form-group">
          <%= f.submit '変更', class: "btn btn-sm btn-primary" %>
        </div>
      <% end %>
    </div>
  </div>
</div>

<!--render後のURLを指定-->
<%= render 'layouts/specify_url', url: "/admin/portfolios/#{@review.portfolio.id}/reviews/#{@review.id}/edit" %>